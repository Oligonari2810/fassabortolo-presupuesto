<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabiques - FassaBortolo Caribe</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f8f9fa; line-height: 1.6; }
        .header { background: white; padding: 1rem 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000; }
        .nav-container { max-width: 1200px; margin: 0 auto; padding: 0 2rem; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.5rem; font-weight: bold; color: #2c3e50; }
        .logo span { color: #e74c3c; }
        .main-container { max-width: 1400px; margin: 0 auto; padding: 2rem; }
        
        .page-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 2rem; border-radius: 15px; margin-bottom: 2rem; }
        .page-header h1 { font-size: 2.2rem; margin-bottom: 1rem; }
        
        .wizard-section { background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); margin-bottom: 2rem; }
        .wizard-question { margin-bottom: 2rem; }
        .wizard-question h3 { color: #2c3e50; margin-bottom: 1rem; }
        .wizard-options { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }
        .option-card { padding: 1rem; border: 2px solid #dee2e6; border-radius: 8px; cursor: pointer; transition: all 0.3s; }
        .option-card:hover { border-color: #e74c3c; background: #f8f9fa; }
        .option-card.selected { border-color: #e74c3c; background: rgba(231, 76, 60, 0.1); }
        
        .systems-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 2rem; margin-top: 2rem; }
        .system-card { background: white; border-radius: 15px; padding: 2rem; box-shadow: 0 5px 20px rgba(0,0,0,0.1); transition: all 0.3s; }
        .system-card:hover { transform: translateY(-5px); }
        .system-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .system-code { font-size: 1.2rem; font-weight: bold; color: #2c3e50; }
        
        .badge { padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.8rem; font-weight: bold; text-transform: uppercase; }
        .badge-core { background: #d4edda; color: #155724; } /* Verde - CORE */
        .badge-condicionado { background: #fff3cd; color: #856404; } /* Amarillo - CONDICIONADO */
        .badge-especial { background: #f8d7da; color: #721c24; } /* Rojo - ESPECIAL */
        .badge-general { background: #d1ecf1; color: #0c5460; } /* Azul - USO GENERAL */
        
        .system-description { color: #6c757d; margin-bottom: 1rem; line-height: 1.6; }
        .system-materials { background: #f8f9fa; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; }
        .system-materials h4 { color: #2c3e50; margin-bottom: 0.5rem; }
        .material-list { font-size: 0.9rem; color: #6c757d; }
        
        .alert-box { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; }
        .alert-box i { margin-right: 0.5rem; }
        
        .btn { padding: 0.8rem 1.5rem; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.3s; }
        .btn-primary { background: #e74c3c; color: white; }
        .btn-primary:hover { background: #c0392b; }
        .btn-secondary { background: #6c757d; color: white; }
        
        .disclaimer-section { background: rgba(231, 76, 60, 0.1); border-left: 4px solid #e74c3c; padding: 1.5rem; margin: 2rem 0; border-radius: 8px; color: #2c3e50; }
        .disclaimer-section strong { color: #e74c3c; }
        
        .hidden { display: none; }
        
        @media (max-width: 768px) {
            .nav-links { display: none; }
            .main-container { padding: 1rem; }
            .wizard-options { grid-template-columns: 1fr; }
            .systems-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <header class="header">
        <nav class="nav-container">
            <div class="logo">Fassa<span>Bortolo</span> Caribe</div>
            <!-- MENÚ SIMPLIFICADO - Solo 3 ítems visibles -->
            <ul class="nav-links">
                <li><a href='/'>Inicio</a></li>
                <!-- <li><a href='/tabiques'>Tabiques</a></li> -->
                <!-- <li><a href='/trasdosados'>Trasdosados</a></li> -->
                <!-- <li><a href='/techos'>Techos</a></li> -->
                <!-- <li><a href='/semi-intemperie'>Semi-intemperie</a></li> -->
                <li><a href='/presupuesto'>Presupuesto</a></li>
            </ul>
        </nav>
    </header>

    <main class="main-container">
        <div class="page-header">
            <h1><i class="fas fa-building"></i> Tabiques de Separación</h1>
            <p>7 sistemas validados para vivienda y hotelería</p>
        </div>

        <!-- Wizard de selección -->
        <div class="wizard-section">
            <div class="wizard-question">
                <h3>1. ¿Altura máxima del tabique?</h3>
                <div class="wizard-options">
                    <div class="option-card" data-altura="2.5" onclick="selectAltura(this, 2.5)">
                        <strong>Hasta 2.5m</strong><br>
                        <small>Perfil 70mm disponible</small>
                    </div>
                    <div class="option-card" data-altura="3.0" onclick="selectAltura(this, 3.0)">
                        <strong>2.5m - 3.2m</strong><br>
                        <small>Perfil 70mm/90mm</small>
                    </div>
                    <div class="option-card" data-altura="3.5" onclick="selectAltura(this, 3.5)">
                        <strong>3.2m - 4.0m</strong><br>
                        <small style="color: #e74c3c;">⚠️ Solo 90mm</small>
                    </div>
                </div>
            </div>

            <div class="wizard-question">
                <h3>2. ¿Condición del ambiente?</h3>
                <div class="wizard-options">
                    <div class="option-card" data-ambiente="interior" onclick="selectAmbiente(this, 'interior')">
                        <strong>Interior seco</strong><br>
                        <small>STD, BA, F</small>
                    </div>
                    <div class="option-card" data-ambiente="humedo" onclick="selectAmbiente(this, 'humedo')">
                        <strong>Interior con humedad</strong><br>
                        <small>AQUA</small>
                    </div>
                </div>
            </div>

            <div class="wizard-question">
                <h3>3. ¿Requiere resistencia al fuego?</h3>
                <div class="wizard-options">
                    <div class="option-card" data-ei="no" onclick="selectEI(this, 'no')">
                        <strong>No requerida</strong><br>
                        <small>Uso general</small>
                    </div>
                    <div class="option-card" data-ei="60" onclick="selectEI(this, '60')">
                        <strong>EI-60</strong><br>
                        <small>⚠️ Sujeto a validación técnica</small>
                    </div>
                    <div class="option-card" data-ei="90" onclick="selectEI(this, '90')">
                        <strong>EI-90</strong><br>
                        <small>⚠️ Sujeto a validación técnica</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sistemas disponibles -->
        <div id="systemsContainer" class="hidden">
            <h2 style="color: #2c3e50; margin-bottom: 1rem;">Sistemas Recomendados</h2>
            <div class="systems-grid" id="systemsGrid">
                <!-- Los sistemas se cargarán dinámicamente -->
            </div>
        </div>

        <!-- DISCLAIMER LEGAL -->
        <div class="disclaimer-section">
            <strong>⚠️ IMPORTANTE:</strong> Esta herramienta es para uso interno de FassaBortolo Caribe. 
            Los valores de resistencia al fuego (EI) son referenciales y deben ser validados 
            técnicamente para cada proyecto según normativa local. 
            Los presupuestos son estimaciones y no constituyen oferta comercial.
        </div>
    </main>

    <script>
        let seleccion = { altura: null, ambiente: null, ei: null };

        function selectAltura(element, valor) {
            document.querySelectorAll('[data-altura]').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            seleccion.altura = valor;
            
            // Alerta si altura >= 3.2m
            if (valor >= 3.2) {
                alert('⚠️ ALTURA CRÍTICA DETECTADA\\n\\nPara alturas ≥ 3.2m se REQUIERE perfil 90mm mínimo.\\nEl sistema 70mm NO está disponible para esta altura.');
            }
            
            actualizarSistemas();
        }

        function selectAmbiente(element, valor) {
            document.querySelectorAll('[data-ambiente]').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            seleccion.ambiente = valor;
            actualizarSistemas();
        }

        function selectEI(element, valor) {
            document.querySelectorAll('[data-ei]').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            seleccion.ei = valor;
            actualizarSistemas();
        }

        function actualizarSistemas() {
            if (!seleccion.altura || !seleccion.ambiente || !seleccion.ei) return;

            const systemsGrid = document.getElementById('systemsGrid');
            const container = document.getElementById('systemsContainer');
            
            let sistemas = [];

            // Sistemas según altura
            if (seleccion.altura >= 3.2) {
                // Solo 90mm para alturas altas
                sistemas = [
                    { id: 'T-90-13', nombre: 'Tabique Alto 136mm (STD 13mm + Z1 90mm)', badge: 'USO GENERAL', badgeClass: 'badge-general', alerta: null },
                    { id: 'T-70-15', nombre: 'Tabique Robusto 120mm (STD 15mm + Z1 70mm)', badge: 'USO GENERAL', badgeClass: 'badge-general', alerta: null }
                ];
            } else {
                // Todos disponibles para alturas menores
                sistemas = [
                    { id: 'T-45-13', nombre: 'Tabique Ligero 91mm (STD 13mm + Z1 45mm)', badge: 'USO GENERAL', badgeClass: 'badge-general', alerta: null },
                    { id: 'T-70-13', nombre: 'Tabique Estándar 116mm (STD 13mm + Z1 70mm)', badge: 'CONDICIONADO', badgeClass: 'badge-condicionado', alerta: '⚠️ Placa BA estándar. Para EI-60 requiere placa F y validación técnica.' },
                    { id: 'T-90-13', nombre: 'Tabique Alto 136mm (STD 13mm + Z1 90mm)', badge: 'USO GENERAL', badgeClass: 'badge-general', alerta: null },
                    { id: 'T-70-15', nombre: 'Tabique Robusto 120mm (STD 15mm + Z1 70mm)', badge: 'USO GENERAL', badgeClass: 'badge-general', alerta: null }
                ];
            }

            // Agregar sistemas AQUA si ambiente húmedo
            if (seleccion.ambiente === 'humedo') {
                sistemas.push(
                    { id: 'T-AQ-70-13', nombre: 'Tabique Húmedo AQUA 116mm (AQUA 13mm + Z1 70mm)', badge: 'USO GENERAL', badgeClass: 'badge-general', alerta: null },
                    { id: 'T-AQ-70-15', nombre: 'Tabique Húmedo Premium AQUA 120mm (AQUA 15mm + Z1 70mm)', badge: 'USO GENERAL', badgeClass: 'badge-general', alerta: null }
                );
            }

            // Actualizar badges según EI
            if (seleccion.ei === '60' || seleccion.ei === '90') {
                sistemas.forEach(s => {
                    if (s.id === 'T-70-13') {
                        s.badge = 'CONDICIONADO';
                        s.badgeClass = 'badge-condicionado';
                        s.alerta = `⚠️ Placa BA estándar. Para EI-${seleccion.ei} requiere placa F y validación técnica.`;
                    } else if (s.id.includes('90') || s.id.includes('15')) {
                        s.badge = 'CORE';
                        s.badgeClass = 'badge-core';
                        s.alerta = `✅ Compatible con EI-${seleccion.ei} según configuración ensayada. EI sujeto a validación de proyecto.`;
                    }
                });
            }

            // Renderizar sistemas
            systemsGrid.innerHTML = sistemas.map(sistema => `
                <div class="system-card">
                    <div class="system-header">
                        <div>
                            <div class="system-code">${sistema.id}</div>
                            <div style="font-size: 0.9rem; color: #6c757d; margin-top: 0.2rem;">${sistema.nombre}</div>
                        </div>
                        <span class="badge ${sistema.badgeClass}">${sistema.badge}</span>
                    </div>
                    
                    ${sistema.alerta ? `
                        <div class="alert-box">
                            <i class="fas fa-exclamation-triangle"></i>
                            ${sistema.alerta}
                        </div>
                    ` : ''}
                    
                    <div class="system-description">
                        <strong>Placas:</strong> ${sistema.id.includes('AQ') ? 'AQUA' : sistema.id.includes('EX') ? 'EXTERNA' : 'STD BA'}<br>
                        <strong>Perfil:</strong> ${sistema.id.includes('45') ? '45mm' : sistema.id.includes('90') ? '90mm' : '70mm'}
                    </div>
                    
                    <button class="btn btn-primary" onclick="addToBudget('${sistema.id}', '${sistema.nombre}')">
                        <i class="fas fa-plus"></i> Añadir al Presupuesto
                    </button>
                </div>
            `).join('');

            container.classList.remove('hidden');
        }

        function addToBudget(id, nombre) {
            let budget = JSON.parse(localStorage.getItem('fassa_budget') || '[]');
            const existing = budget.find(item => item.id === id);
            
            if (existing) {
                existing.quantity += 10;
            } else {
                budget.push({ id: id, name: nombre, quantity: 10 });
            }
            
            localStorage.setItem('fassa_budget', JSON.stringify(budget));
            alert(`✅ Sistema ${id} añadido al presupuesto`);
        }

        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            // Auto-seleccionar primera opción para facilitar
            document.querySelector('[data-altura="2.5"]').click();
            document.querySelector('[data-ambiente="interior"]').click();
            document.querySelector('[data-ei="no"]').click();
        });
    </script>
</body>
</html>
